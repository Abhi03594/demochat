version: '1.0'
steps:
 unit-tests:
      image: monostream/nodejs-gulp-bower:latest
      fail-fast: false
      working-directory : ${{initial-clone}}
      commands:
        #- npm install
        - gulp test
        - echo $(date)

 build-step:
     type: build
     dockerfile: Dockerfile
     image-name: verchol/demochat
     tag: ${{CF_BRANCH}}

 push to registry:
     type: push
     candidate: ${{build-step}}
     tag: ${{CF_BRANCH}}

 demo-chat compositon:
      type: launch-composition
      environmentName: 'env-composition-name'
      composition: demochat-oleg
      
